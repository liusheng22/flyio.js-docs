# Project structure

Directory structure:

**demon**    		 demons
**dist**          		 the release files
**src**                		 source code dir
build.js			 project build script
index.js			 the entry of npm
node-index.js	 the entry of node

## src

src is the source code directory，explanation is as follows

| File or directory name | type    | description                              |
| ---------------------- | ------- | ---------------------------------------- |
| adapter                | **dir** | adapter directory                        |
| node                   | **dir** | source code for node，**It won't be packed** |
| utils                  | **dir** | Some tool function files                 |
| fly.js                 | file    | the main entry of fly.js                 |
| wx.js                  | file    | the entry of WeChat Mini Program         |
| weex.js                | file    | the entry of weex                        |
| engine-wrapper.js      | file    | engine-wrapper source code               |



## Building environment and dist directory

**Building**

```shell
npm run build
```

Although there is only one command for packaging, it generates four  kinds of release files  for different environments, these four environments are “**npm**” 、“**cdn**”、“**cdn-min**”、“**umd**”。

**npm**

This building environment corresponds to the release folder `dist/npm`  . All the files in this folder support modularity, so , in npm, you should require the files under this folder. The files under this folder cannot be required with the script tag:

```javascript
var EngineWrapper = require("flyio.js/dist/npm/engine-wrapper")
```

**cdn cdn-min**

The files generated by these two environments are specifically used for CDN , which does not support modularity and can be required with script tags，and the global variables are automatically set after being required. The difference between the two building environments  is that the former does not compress, and the latter compresses. **Generating files corresponding to the root directory of the dist and the adapter directory in the root directory**：

```javascript
// fly、Fly will be automatically set to global variables
<script src="https://unpkg.com/flyio.js/dist/fly.min.js"></script>
// dsbAdapter will be automatically set to global variables
<script src="https://unpkg.com/flyio.js/dist/adapter/dsbridge.min.js"></script>
// wjsbAdapter  will be automatically set to global variables
<script src="https://unpkg.com/flyio.js/dist/adapter/webviewjsbridge.min.js"></script>
```

**umd**

Both "umd" and "npm" building environment support modularity, which can be introduced by `require` in the NPM environment, and support both AMD and CMD. The difference is that **the files generated from umd build envrionmet are compressed, and saved into the `dist/umd` directory** .





